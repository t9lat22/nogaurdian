<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>nogaurdian</title>
<link rel="icon" href="favicon.png">

<style>
/* ================= THEME ================= */
:root {
    --bg: #0f0f0f;
    --card: #1a1a1a;
    --border: #2a2a2a;
    --text: #e0e0e0;
    --neon: #00f7ff;
}

/* ================= BODY ================= */
body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, sans-serif;
    background: var(--bg);
    color: var(--text);
}

/* ================= HEADER ================= */
.header {
    text-align: center;
    padding: 40px 20px 20px;
}

.neon-title {
    font-size: 3rem;
    font-weight: bold;
    color: var(--neon);
    text-transform: lowercase;
    text-shadow:
        0 0 5px var(--neon),
        0 0 10px var(--neon),
        0 0 20px var(--neon),
        0 0 40px #00c3ff;
}

/* ================= NEON SEARCH ================= */
.search-bar {
    margin-top: 20px;
}

.search-bar input {
    width: 300px;
    max-width: 90%;
    padding: 12px 15px;
    font-size: 1rem;
    border-radius: 30px;
    border: 2px solid var(--neon);
    background: transparent;
    color: white;
    outline: none;
    box-shadow:
        0 0 5px var(--neon),
        0 0 15px var(--neon);
    transition: 0.3s;
}

.search-bar input:focus {
    box-shadow:
        0 0 10px var(--neon),
        0 0 25px var(--neon);
}

/* ================= MAIN ================= */
main {
    max-width: 1200px;
    margin: auto;
    padding: 1rem;
}

/* ================= ZONE GRID ================= */
.zone-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

/* ================= ZONE CARD ================= */
.zone-item {
    position: relative;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.zone-item:hover {
    transform: translateY(-5px) scale(1.03);
    box-shadow: 0 0 15px var(--neon);
}

.zone-item img {
    width: 100%;
    height: 160px;           /* FIXED IMAGE SIZE */
    object-fit: cover;
    display: block;
}

/* Hover play icon */
.zone-item::after {
    content: "â–¶";
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    color: white;
    opacity: 0;
    transition: 0.2s;
}

.zone-item:hover::after {
    opacity: 1;
}

/* ================= ZONE VIEWER ================= */
#zoneViewer {
    position: fixed;
    inset: 0;
    background: #000;
    display: none;
    flex-direction: column;
    z-index: 1000;
}

.zone-header {
    display: flex;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    background: #111;
    border-bottom: 1px solid #333;
}

.zone-controls button {
    background: #222;
    color: white;
    border: 1px solid #333;
    padding: 8px 14px;
    border-radius: 6px;
    cursor: pointer;
}

.zone-controls button:hover {
    background: #333;
}

#zoneFrame {
    flex: 1;
    border: none;
    width: 100%;
}
</style>
</head>

<body>

<div class="header">
    <div class="neon-title">nogaurdian</div>
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search zones...">
    </div>
</div>

<main>

<details open>
    <summary style="font-size:1.2rem;font-weight:bold;">Featured Zones</summary>
    <div id="featuredZones" class="zone-container"></div>
</details>

<br><hr><br>

<details open>
    <summary style="font-size:1.2rem;font-weight:bold;">All Zones</summary>
    <div id="container" class="zone-container"></div>
</details>

</main>

<div id="zoneViewer">
    <div class="zone-header">
        <div id="zoneName"></div>
        <div class="zone-controls">
            <button onclick="fullscreenZone()">Fullscreen</button>
            <button onclick="aboutBlank()">New Tab</button>
            <button onclick="closeZone()">Close</button>
        </div>
    </div>
    <iframe id="zoneFrame"></iframe>
</div>

<script>
const zonesURL = "https://cdn.jsdelivr.net/gh/gn-math/assets@main/zones.json";
const coverURL = "https://cdn.jsdelivr.net/gh/gn-math/covers@main";
const htmlURL = "https://cdn.jsdelivr.net/gh/gn-math/html@main";

const container = document.getElementById("container");
const featured = document.getElementById("featuredZones");
const viewer = document.getElementById("zoneViewer");
const frame = document.getElementById("zoneFrame");
const searchInput = document.getElementById("searchInput");

let zones = [];

async function listZones() {
    const res = await fetch(zonesURL + "?t=" + Date.now());
    zones = await res.json();

    zones = zones.filter(z =>
        !z.name.toLowerCase().includes("suggest") &&
        !z.name.toLowerCase().includes("comment")
    );

    if (zones.length) zones[0].featured = true;
    render(zones);
}

function render(list) {
    container.innerHTML = "";
    featured.innerHTML = "";

    list.forEach(z => {
        const card = document.createElement("div");
        card.className = "zone-item";
        card.onclick = () => openZone(z);

        const img = document.createElement("img");
        img.src = z.cover.replace("{COVER_URL}", coverURL);
        card.appendChild(img);

        container.appendChild(card);

        if (z.featured) {
            const featuredCard = card.cloneNode(true);
            featuredCard.onclick = () => openZone(z);
            featured.appendChild(featuredCard);
        }
    });
}

function openZone(z) {
    fetch(z.url.replace("{HTML_URL}", htmlURL))
        .then(r => r.text())
        .then(html => {
            frame.srcdoc = html;
            viewer.style.display = "flex";
        });
}

function closeZone() {
    viewer.style.display = "none";
    frame.srcdoc = "";
}

function fullscreenZone() {
    frame.requestFullscreen();
}

function aboutBlank() {
    const w = window.open("about:blank");
    w.document.write(frame.srcdoc);
}

/* ================= SEARCH ================= */
searchInput.addEventListener("input", e => {
    const value = e.target.value.toLowerCase();
    const filtered = zones.filter(z =>
        z.name.toLowerCase().includes(value)
    );
    render(filtered);
});

listZones();
</script>

</body>
</html>
